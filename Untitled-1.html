<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="js/globals.js"></script>
<title>Untitled Document</title>
<style>
	#test {
		width:100px;
		height:100px;
		background:red;
	}
</style>



</head>

<body>

<div id="test"></div>
<script>
	var test = document.getElementById('test');
	
	ML.animate = function (el, props, func) {
		var timer;
		var inc = 0;
		var currProps = {};
		var stopAnim = false;
		
		function getCurrs() {
			currProps = {};
			
			for (var prop in props) {
				var currProp = parseInt(ML.El.getStyl(el, prop).replace('px', ''));
				currProps[prop] = currProp;
			}
		}
					
		function move () {
			inc++;				
			getCurrs();
			
			for (var prop in props) {
				el.style[prop] = (currProps[prop]+1) + 'px';
				
				if (props[prop] === currProps[prop]+1) stopAnim = true;
			}
			
			timer = setTimeout(move, 1);		
			if (stopAnim) clearTimeout(timer);
		}
		
		move();
		getCurrs();
		
	}
	
	ML.animate(test, {width: 200, height:200})
</script>
</body>
</html>